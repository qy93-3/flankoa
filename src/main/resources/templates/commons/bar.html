<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>公共页面代码</title>
    <script src="http://www.jq22.com/jquery/1.11.1/jquery.min.js"></script>
    <!--<script type="text/javascript" src="login/js/jquery-ui.min.js" th:src="@{/login/js/jquery-ui.min.js}"></script>-->
    <link rel="stylesheet" href="//at.alicdn.com/t/font_1088874_nhvocdb2ud.css"/>
    <link rel="stylesheet" href="layui-v2.4.5/css/layui.css" th:href="@{/layui-v2.4.5/css/layui.css}"/>
    <script src="layui-v2.4.5/layui.js"  th:src="@{/layui-v2.4.5/layui.js}"></script>
</head>
<body>
<!--nav-->
<div class="layui-header" th:fragment="top">
    <div class="layui-logo">FlankOA</div>

    <ul class="layui-nav layui-layout-right">

        <!--邮件-->
        <li class="layui-nav-item">
            <a href="javascript:;" id="animation-left-nav" th:href="@{/email/mana}"
               class="iconfont layui-extendfajianxiang"></a>
        </li>
        <!--锁屏-->
        <li class="layui-nav-item">
            <a href="lock.html" th:href="@{/user/lock}" class="layui-icon layui-icon-password"></a>
        </li>
        <li class="layui-nav-item">
            <a href="javascript:;">
                <img src="http://t.cn/RCzsdCq" class="layui-nav-img">[[${session.user.realName}]]
            </a>
            <dl class="layui-nav-child">

                <!--<dd>-->
                <!--<a href=""  class="layui-icon layui-icon-username">基本资料</a>-->
                <!--</dd>-->
                <dd>
                    <!--皮肤切换-->
                    <div style="margin-left: 10px;">
                        <div id="test-all" style="width:33px;"></div>
                        <span style="color:black">设置主题</span>
                    </div>

                </dd>
                <dd>
                    <a href="login.html" class="layui-icon layui-icon-close" th:href="@{/user/logout}">退出</a>
                </dd>
            </dl>
        </li>

    </ul>
</div>
<!--slide-->
<div class="layui-side layui-bg-black" th:fragment="slide">
   <div class="layui-side-scroll" id="admin-navbar-side">
       <ul class="layui-nav layui-nav-tree" lay-filter="test" id="nav">
      <!-- <li class="layui-nav-item layui-nav-itemed">
           <a class="" href="javascript:;">公告管理</a>
           <dl class="layui-nav-child">
               <dd>
                   <a href="javascript:;" class="site-demo-active test1" th:href="@{/message/mana}">通知管理</a>
               </dd>
               <dd>
                   <a href="javascript:;" class="site-demo-active test2" th:href="@{/message/list}">通知列表</a>
               </dd>
           </dl>
       </li>
       <li class="layui-nav-item">
           <a href="javascript:;">考勤管理</a>
           <dl class="layui-nav-child">
               <dd>
                   <a href="javascript:;" th:href="@{/attends/list}">考勤列表</a>
               </dd>
               <dd>
                   <a href="javascript:;" th:href="@{/attends/report}">考勤报表</a>
               </dd>
               &lt;!&ndash;<dd>&ndash;&gt;
               &lt;!&ndash;<a href="javascript:;">考勤月报表</a>&ndash;&gt;
               &lt;!&ndash;</dd>&ndash;&gt;
           </dl>
       </li>
       <li class="layui-nav-item">
           <a href="javascript:;">个人管理</a>
           <dl class="layui-nav-child">
               <dd>
                   <a href="javascript:;" th:href="@{/email/mana}">邮件管理</a>
               </dd>
               <dd>
                   <a href="javascript:;" th:href="@{/email/calendar}">我的日历</a>
               </dd>
               <dd>
                   <a href="javascript:;" th:href="@{/email/phoneMana}">通讯录</a>
               </dd>
           </dl>
       </li>
       <li class="layui-nav-item">
           <a href="javascript:;">流程管理</a>
           <dl class="layui-nav-child">
               <dd>
                   <a href="javascript:;" th:href="@{/process/addProcess}"> 新建流程</a>
               </dd>
               <dd>
                   <a href="javascript:;" th:href="@{/process/myProcessHtml}">我的申请</a>
               </dd>
               <dd>
                   <a href="javascript:;" th:href="@{/process/processCheck}">流程审核</a>
               </dd>
           </dl>
       </li>
       <li class="layui-nav-item">
           <a href="javascript:;">系统管理</a>
           <dl class="layui-nav-child">
               <dd>
                   <a href="javascript:;" th:href="@{/menu/mana}">菜单管理</a>
               </dd>
               <dd>
                   <a href="javascript:;" th:href="@{/dept/mana}">部门管理</a>
               </dd>
               <dd>
                   <a href="javascript:;" th:href="@{/user/mana}">用户管理</a>
               </dd>
               <dd>
                   <a href="javascript:;" th:href="@{/role/mana}">角色管理</a>
               </dd>
           </dl>
       </li>-->

   </ul>
    </div>

</div>
</div>
</body>

<script id="slideBarJs">
    layui.use(['element','jquery'], function () {
        var element = layui.element;
        var $ = layui.jquery;
        $(function () {
            var html="";
            //获取菜单
            $.ajax({
                url: "/roleMenu/menuInfo",
                type: "get",
                dataType: "json",
                data: {},
                success: function (data) {
                    $("#nav").find('span.layui-nav-bar').remove()
                    var navs =data.data;
                    /*html += '<ul class="layui-nav layui-nav-tree"  lay-filter="test">';*/
                    $.each(navs, function (i, item) {
                        html = html + '<li class="layui-nav-item">';
                        html += '<a href="javascript:;" th:href="@{' + item.href + '} " nav-id="' + item.menuId + '">' +
                            '<cite>' + item.content + '</cite></a>';
                        if (item.children != null && item.children.length > 0) {
                            html += '<dl class="layui-nav-child">';
                            $.each(item.children, function (j, item2) {
                                html += '<dd>'
                                html += '<a href="javascript:;" th:href="@{' + item.href + '} " ' +
                                    'nav-id="' + item2.menuId + '">' +
                                    '<cite>' + item2.content + '</cite></a></dd>';
                                if (item2.children != null && item2.children.length > 0) {
                                    html += '<ol class="layui-nav-child">';
                                    $.each(item2.children, function (k, item3) {
                                        html += '<li>' +
                                            '<a href="javascript:;" th:href="@{' + item.href + '} " nav-id="' + item3.menuId + '">' +
                                            '<cite>' + item3.content + '</cite>' +
                                            '</a>' +
                                            '</li>';
                                    });
                                    html += '</ol>';
                                }
                            });
                            html += '</dl>';
                        }
                        html += '</li>';
                    });
                    /* html += '</ul>';*/

                    $('#nav').html(html);

                    layui.use('element', function() {
                        var element = layui.element;
                        element.init();
                    });
                }
            })


        })
    });
</script>
</html>